{% extends "HAIInterface/layout.html" %}

<body>
{% block content %}

<style>
 .input-container {
  display: flex;
  align-items: center; 
}

/* drop-down box */
.altitudeDropdown {
  flex: 1; 
  padding: 10px; 
  margin-left: 10px; 
  font-size: 16px; 
  background-color: rgb(236, 168, 245);
  border: 1px solid #ccc; 
  border-radius: 4px;
  box-sizing: border-box;
}
</style>



<div id="main" class="main-content-container">
    <div id ='title' class="general-title">Altitude</div>
    <div class="subcontent-container" style="flex-grow: 1; justify-content: space-evenly;">
        <!-- <div class="general-text" id="current-altitude" >Current Altitude:</div> -->
        <div class="input-container">
            <label for=" altChange:" class="general-text">Change altitute to:</label>
            <select id="altitudeDropdown" class="custom-dropdown">
                <option value="1000">1000</option>
                <option value="1100">1100</option>
                <option value="1200">1200</option>
                <option value="1300">1300</option>
                <option value="1400">1400</option>
                <option value="1500">1500</option>
              </select><br><br>
        </div>
        <!-- <input class="button" type="submit" value="Change"> -->
        <div class="button" id="change-button" >Change</div>
    </div>
</div>


{% endblock %}
</body>

<script>
{% block script %}
    var HelpId=4;
    document.getElementById('help').onclick = () => { log({"page": "Change altitude", "action": "help button pressed"}); window.location.href = '/hai-interface/help?num=' + HelpId }
   // Get current altitude. 
    //document.getElementById('current-altitude').innerHTML=current_altitude
    document.getElementById('help').href='/hai-interface/help?num='+HelpId
    document.getElementById('map').href = '/hai-interface/map'
    document.getElementById('cruise-sidebar').style.backgroundColor = "pink"


    // Change altitude when "change" button clicked
    document.getElementById("change-button").onclick = () => {
        console.log('Clicked')
        const dropdown = document.getElementById('altitudeDropdown');
        const selectedValue = dropdown.value;
        if (selectedAltitude === "") {
            const dialog = document.createElement('dialog');
            dialog.innerHTML = `
            <p>Altitude not selected /p>
            <button onclick="this.closest('dialog').close()">OK</button>
            `;
            document.body.appendChild(dialog);
            dialog.showModal();
        } else {
            console.log(selectedValue)
            log({"page": "change-altitude", "action": "altitude changed by participant" + selectedValue })
            alert("Altitude successfully changed to:"+ selectedValue)
            const dialog = document.createElement('dialog');
            dialog.innerHTML = `
            <p>Altitude successfully changed to ${selectedValue} feet/p>
            <button onclick="this.closest('dialog').close()">Close</button>
            `;
            document.body.appendChild(dialog);
            dialog.showModal();
        /* setInterval(() => {
            alertt("Pressure successfully changed to:"+ document.getElementById("altChange").value )
         }, 50000) */
            window.location.href ='/hai-interface/inflight?Changed_altitude=' +  selectedValue;
            fetch("/var?change-altitude"+ selectedValue)
            } 

    
   

{% endblock %}
</script>
